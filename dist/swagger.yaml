swagger: '2.0'

# This is your document metadata
info:
  version: "1.0.0"
  title: VROOM DSP
  description: |
    Api sur la consultation et la mise à jour de dossier concernant la grêle.
produces:
  - "application/json"
paths:

  /experts/{id}/dossiers/{jour}:
    get:
      summary: Liste des dossiers du jour
      description: |
        Retourne la liste des dossiers de VROOM du jour selon l'identifiant de l'expert et le jour choisi,
        le tout triés par status et par date d'expertise.
      tags:
        - Dossier
      parameters:
        - name: id
          in: path
          description: |
            Identifiant de l'expert choisi
          required: true
          type: integer
          format: int64
        - name: jour
          in: path
          description: |
            Date des dossiers à récupérer
          required: true
          type: string
          format: date
        - $ref: '#/parameters/token'
        - $ref: '#/parameters/login'
        - $ref: '#/parameters/dsp'
        - name: start
          in: query
          description: |
            Correspond au numéro de la page
          required: false
          type: integer
          format: int32
          minimum: 0
        - name: limit
          in: query
          description: |
            Nombre de dossiers à retourner pour chaque page
          required: false
          type: integer
          format: int32

      responses:
        "200":
          description: Dossiers du jour
          schema:
            type: object
            required:
              - message
              - response
              - nb_resultats
              - execute_time
              - resultats
              - current_page
              - limit
            properties:
              message:
                type: string
                description: Message sur le statut de la requête.
              response:
                type: string
                description: Statut de la requete.
              nb_resultats:
                type: integer
                format: int32
                description: Nombre de résultats de la requête.
              execute_time:
                type: number
                description: Temps de l'exécution de la requête.
              new_token:
                type: string
                description: Nouveau token à utiliser pour les prochains appels.
              resultats:
                $ref: '#/definitions/ListeDesDossiers'
              current_page:
                type: integer
                format: int32
                description: |
                  Numéro de la page actuelle commence à 0
                minimum: 0
              limit:
                type: string
                description:  |
                  le nombre avant la virgule correspond au nombre de dossiers précédents les dossiers retournés, le nombre après la virgule correspond au nombre de dossiers par page.
          examples:
            application/json:
              response: OK
              message: ""
              nb_resultats: 2
              execute_time: 0.00087
              resultats:
                - dossier_id: 1
                  nom_prenom: Dupont Luc
                  vehicule:
                    immatriculation: DJ-925-AL
                  statut: 2
                - dossier_id: 2
                  nom_prenom: Marc Trollou
                  vehicule:
                    immatriculation: AP-832-DD
                  statut: 1
              current_page: 0
              limit: 15

        "400":
          description: Identifiant(s) fourni(s) invalide(s)
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: "Les identifiants fournis ne sont pas valides."
              nb_resultats: 0
              execute_time: 0.00087
              resultats: 0
        "401":
          description: Vous n'êtes pas authentifié.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: "Vous devez vous connecter pour naviguer sur l'application."
              nb_resultats: 0
              execute_time: 0.00087
              resultats: 0
        "403":
          description: Dossiers interdits pour cet utilisateur.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: "Vous n'avez pas le droit d'accéder à ces dossiers."
              nb_resultats: 0
              execute_time: 0.00087
              resultats: 0
        "404":
            description: Aucun dossier trouvé.
            schema:
              $ref: '#/definitions/Returner'
            examples:
              application/json:
                response: FAIL
                message: "Aucun dossier trouvé pour ce jour."
                nb_resultats: 0
                execute_time: 0.00087
                resultats: 0

  /dossiers/{id}:
    get:
      summary: Informations d'un dossier
      description: |
        Retourne le dossier depuis son identifiant
      tags:
        - Dossier
      parameters:
        - name: id
          in: path
          description: Identifiant unique du dossier
          required: true
          type: integer
          format: int64
        - $ref: '#/parameters/token'
        - $ref: '#/parameters/login'
        - $ref: '#/parameters/dsp'
      responses:
        "200":
          description: Dossier récupéré depuis sont identifiant
          schema:
            type: object
            required:
              - message
              - response
              - nb_resultats
              - execute_time
              - resultats
            properties:
              message:
                type: string
                description: Message sur le statut de la requête.
              response:
                type: string
                description: Statut de la requete.
              nb_resultats:
                type: integer
                format: int32
                description: Nombre de résultats de la requête
              execute_time:
                type: number
                description: Temps de l'exécution de la requête
              new_token:
                type: string
                description: Nouveau token à utiliser pour les prochains appels
              resultats:
                $ref: "#/definitions/Dossier"
          examples:
            application/json:
              response: OK
              message: ""
              nb_resultats: 1
              execute_time: 0.00087
              resultats:
                dossier_id: 1
                nom_prenom: Dupont Luc
                vehicule:
                  immatriculation: DJ-925-AL
                  marque: Peugeot
                  modele: 206
                  nombre_pieces: 2
                photos: []
                nombre_photos: 0
                statut: 1
                afficher_btn_expertiser: false
                afficher_btn_proces_verbal: false
        "400":
          description: Identifiant du dossier invalide.
          schema:
            $ref: "#/definitions/Returner"
        "401":
          description: Vous n'êtes pas authentifié.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: "Vous devez vous connecter pour naviguer sur l'application."
              nb_resultats: 0
              execute_time: 0.00087
              resultats: 0
        "403":
          description: Dossier interdit pour cet utilisateur.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: "Vous n'avez pas le droit d'accéder à ce dossier."
              nb_resultats: 0
              execute_time: 0.00087
              resultats: 0
        "404":
          description: Aucun dossier trouvé.
          schema:
            $ref: "#/definitions/Returner"

  /dossiers/{id}/pieces:
    get:
      summary: Liste des pièces endommagées du dossier
      description: |
        Retourne les pièces endommagées du dossier depuis l'identifiant de celui-ci.
      tags:
        - Pieces
      parameters:
        - name: id
          in: path
          description: Identifiant du dossier
          required: true
          type: integer
          format: int32
        - $ref: '#/parameters/token'
        - $ref: '#/parameters/login'
        - $ref: '#/parameters/dsp'
      responses:
        "200":
          description: Liste des pièces endommagées du dossier.
          schema:
            type: object
            required:
              - message
              - response
              - nb_resultats
              - execute_time
              - resultats
            properties:
              message:
                type: string
                description: Message sur le statut de la requête.
              response:
                type: string
                description: Statut de la requete.
              nb_resultats:
                type: integer
                format: int32
                description: Nombre de résultats de la requête
              execute_time:
                type: number
                description: Temps de l'exécution de la requête
              new_token:
                type: string
                description: Nouveau token à utiliser pour les prochains appels
              resultats:
                type: array
                items:
                  $ref: "#/definitions/Piece"
          examples:
            application/json:
              response: OK
              message: ""
              nb_resultats: 2
              execute_time: 0.00087
              resultats:
                - nom: Capot
                  aluminium: false
                  peinture: true
                  hors_sinistre: false
                  type_reparation: Echange
                  impact:
                    - taille: petit
                      nombre: 3
                    - taille: moyen
                      nombre: 15
                - nom: Aile AVG
                  aluminium: true
                  peinture: false
                  hors_sinistre: false
                  type_reparation: Débosselage
                  impact:
                    - taille: gros
                      nombre: 6
        "400":
          description: L'identifiant du dossier fourni est invalide.
          schema:
            $ref: "#/definitions/Returner"
          examples:
            application/json:
              response: FAIL
              message: "L'identifiant du dossier est invalide."
              nb_resultats: 0
              execute_time: 0.00087
              resultats: 0
        "401":
          description: Vous n'êtes pas authentifié.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: "Vous devez vous connecter pour naviguer sur l'application."
              nb_resultats: 0
              execute_time: 0.00087
              resultats: 0
        "403":
          description: Dossier interdit pour cet utilisateur.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: "Vous n'avez pas le droit d'accéder à ce dossier."
              nb_resultats: 0
              execute_time: 0.00087
              resultats: 0
        "404":
          description: Aucune pièce trouvé pour le dossier.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: "Aucun dossier n'a été trouvé pour cet identifiant."
              nb_resultats: 0
              execute_time: 0.00087
              resultats: 0

    post:
      summary: Créé une pièce
      description: |
        Soumet la création d'une nouvelle pièce pour ce dossier.
      tags:
        - Pieces
      parameters:
        - description: |
            Identifiant du dossier
          name: id
          in: path
          required: true
          type: integer
          format: int32

        - description: |
            Formulaire d'ajout d'une pièce
          name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/Piece'

        - $ref: '#/parameters/token'
        - $ref: '#/parameters/login'
        - $ref: '#/parameters/dsp'
      responses:
        "201":
          description: |
            Succès de la création de la pièce.
          schema:
            type: object
            required:
              - message
              - response
              - nb_resultats
              - execute_time
              - resultats
            properties:
              message:
                type: string
                description: Message sur le statut de la requête.
              response:
                type: string
                description: Statut de la requete.
              nb_resultats:
                type: integer
                format: int32
                description: Nombre de résultats de la requête.
              execute_time:
                type: number
                description: Temps de l'exécution de la requête.
              new_token:
                type: string
                description: Nouveau token à utiliser pour les prochains appels.
              resultats:
                $ref: '#/definitions/Piece'
          examples:
            application/json:
              response: OK
              message: |
                La pièce a été créé avec succès.
              nb_resultats: 1
              execute_time: 0.00087
              resultats:
                nom: Capot
                aluminium: false
                peinture: true
                hors_sinistre: false
                type_reparation: Echange
                impact:
                  - taille: petit
                    nombre: 3
                  - taille: moyen
                    nombre: 15
        "400":
          description: |
            Erreur dans les paramètres attendus ou dans l'état de la persistance.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: |
                Le formulaire n'est pas valide.
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null

        "401":
          description: Vous n'êtes pas authentifié.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: |
                Vous n'êtes pas authentifié
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null

        "403":
          description: |
            Dossier interdit pour cet utilisateur.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: |
                Vous n'avez pas le droit de modifier ce dossier.
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null
        "404":
          description: Aucun dossier trouvé.
          schema:
            $ref: "#/definitions/Returner"
          examples:
            application/json:
              response: FAIL
              message: |
                Le dossier n'existe pas.
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null

        "409":
          description: La pièce en question existe déjà.
          schema:
            $ref: "#/definitions/Returner"
          examples:
            application/json:
              response: FAIL
              message: |
                La pièce *Capot* existe déjà.
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null

  /dossiers/{id}/grilles/prix:
    get:
      summary: Listes des prix des grilles
      description: |
        Liste des prix calculés selon les impacts sur les différentes pièces selon les barèmes des différentes grilles
      tags:
        - Dossier
      parameters:
        - description: |
            Identifiant du dossier
          name: id
          in: path
          required: true
          type: integer
          format: int32

        - $ref: '#/parameters/token'
        - $ref: '#/parameters/login'
        - $ref: '#/parameters/dsp'
      responses:
        "200":
          description: |
            Grilles présentes
          schema:
            type: object
            required:
              - message
              - response
              - nb_resultats
              - execute_time
              - resultats
            properties:
              message:
                type: string
                description: Message sur le statut de la requête.
              response:
                type: string
                description: Statut de la requete.
              nb_resultats:
                type: integer
                format: int32
                description: Nombre de résultats de la requête
              execute_time:
                type: number
                description: Temps de l'exécution de la requête
              new_token:
                type: string
                description: Nouveau token à utiliser pour les prochains appels
              resultats:
                $ref: "#/definitions/ListePrixGrilles"
          examples:
            application/json:
              response: OK
              message: |
                Liste des prix des différentes grilles.
              nb_resultats: 3
              execute_time: 0.00077
              resultats:
                - nom_grille: Dent Wizard
                  montant: 2000.00
                - nom_grille: Go Tech
                  montant: 2600.30
                - nom_grille: Grele Master
                  montant: 1900.00

        "400":
          description: |
            L'identifiant du dossier n'est pas valide.
          schema:
             $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: |
                L'identifiant transmis n'est pas valide.
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null

        "401":
          description: |
            Vous n'êtes pas authentifié.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: |
                Vous n'êtes pas authentifié
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null

        "403":
          description: |
            Dossier interdit pour cet utilisateur.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: |
                Vous n'avez pas le droit de modifier ce dossier.
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null
        "404":
          description: |
            Aucun dossier trouvé pour cet identifiant.
          schema:
            $ref: "#/definitions/Returner"
          examples:
            application/json:
              response: FAIL
              message: |
                La pièce n'existe pas.
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null

  /dossiers/{id}/proces_verbal:
    post:
      summary: Génération du procès verbal d'un dossier DSP
      description: |
        Génération d'un procès verbal d'expertise d'un dossier DSP depuis un identifiant de dossier et de différentes informations.
      tags:
        - Dossier
      parameters:
        - name: id
          in: path
          type: integer
          format: int64
          required: true

        - name: temps_redressage_1
          type: number
          in: formData
          required: false
          description: |
            Le temps de redressage numero un

        - name: temps_redressage_2
          in: formData
          required: false
          type: number
          description: |
            Le temps de redressage numero deux

        - name: temps_peinture
          in: formData
          required: false
          type: number
          description: |
            Le temps necessaire pour peindre les pièces endommagées

        - name: est_reparable
          in: formData
          required: true
          type: string
          description: |
            Texte des boutons indiquant si le véhicule est "Réparable" ou "A l'étude" ou "Non réparable"

        - name: montant
          in: formData
          required: true
          type: number
          description: |
            Montant d'engagement sur le coût total des réparations vu entre le réparateur et l'expert.

        - name: signature_expert
          in: formData
          required: true
          type: file
          description: |
            Signature de l'expert pour certifié que c'est bien lui qui a établi ce PV

        - name: signature_reparateur
          in: formData
          required: true
          type: file
          description: |
            Signature du réparateur pour certifié que c'est bien lui qui va réparer pour ce montant

        - $ref: '#/parameters/token'
        - $ref: '#/parameters/login'
        - $ref: '#/parameters/dsp'
      responses:
        "201":
          description: |
            Succès de la génération du procès verbal
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: OK
              message: |
                La procès verbal a été créé avec succès.
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null
        "400":
          description: |
            Identifiant invalide ou formulaire mal renseigné
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: |
                Il manque des informations ou elles sont invalides pour générer le procès verbal.
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null
        "401":
          description: |
            Vous n'êtes pas authentifié.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: |
                Vous n'êtes pas authentifié
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null

        "403":
          description: |
            Dossier interdit pour cet utilisateur.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: |
                Vous n'avez pas le droit de modifier ce dossier.
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null

  /dossiers/{dossier_id}/pieces/{piece_id}:
    put:
      summary: Met à jour une pièce
      description: |
        Met à jour une pièce depuis son id et son dossier id
      tags:
        - Pieces
      parameters:
        - description: |
            Identifiant du dossier
          name: dossier_id
          in: path
          required: true
          type: integer
          format: int64

        - description: |
            Identifiant d'une pièce
          name: piece_id
          in: path
          required: true
          type: integer
          format: int64

        - description: |
            Formulaire de mise à jour d'une pièce
          name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/Piece'

        - $ref: '#/parameters/token'
        - $ref: '#/parameters/login'
        - $ref: '#/parameters/dsp'
      responses:
        "200":
          description: |
            Succès de la mise à jour de la pièce.
          schema:
            type: object
            required:
              - message
              - response
              - nb_resultats
              - execute_time
              - resultats
            properties:
              message:
                type: string
                description: Message sur le statut de la requête.
              response:
                type: string
                description: Statut de la requete.
              nb_resultats:
                type: integer
                format: int32
                description: Nombre de résultats de la requête.
              execute_time:
                type: number
                description: Temps de l'exécution de la requête.
              new_token:
                type: string
                description: Nouveau token à utiliser pour les prochains appels.
              resultats:
                $ref: '#/definitions/Piece'
          examples:
            application/json:
              response: OK
              message: |
                Succès de la mise à jour de la pièce.
              nb_resultats: 1
              execute_time: 0.00077
              resultats:
                nom: Capot
                aluminium: false
                peinture: true
                hors_sinistre: false
                type_reparation: Echange
                impact:
                  - taille: petit
                    nombre: 3
                  - taille: moyen
                    nombre: 15
        "400":
          description: |
            Les informations fournies ne sont pas bonne
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: |
                Les données transmises sont invalides.
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null

        "401":
          description: Vous n'êtes pas authentifié.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: |
                Vous n'êtes pas authentifié
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null

        "403":
          description: |
            Dossier interdit pour cet utilisateur.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: |
                Vous n'avez pas le droit de modifier ce dossier.
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null
        "404":
          description: Aucun pièce trouvée.
          schema:
            $ref: "#/definitions/Returner"
          examples:
            application/json:
              response: FAIL
              message: |
                La pièce n'existe pas.
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null

    delete:
      summary: Supprime une pièce
      description: |
        Supprime la pièce depuis son id et son dossier id
      tags:
        - Pieces
      parameters:
        - description: |
            Identifiant du dossier
          name: dossier_id
          in: path
          required: true
          type: integer
          format: int64

        - description: |
            Identifiant d'une pièce
          name: piece_id
          in: path
          required: true
          type: integer
          format: int64

        - $ref: '#/parameters/token'
        - $ref: '#/parameters/login'
        - $ref: '#/parameters/dsp'
      responses:
        "204":
          description: |
            La pièce a été supprimé avec succès.
          schema:
            type: object
            required:
              - message
              - response
              - nb_resultats
              - execute_time
              - resultats
            properties:
              message:
                type: string
                description: Message sur le statut de la requête.
              response:
                type: string
                description: Statut de la requete.
              nb_resultats:
                type: integer
                format: int32
                description: Nombre de résultats de la requête.
              execute_time:
                type: number
                description: Temps de l'exécution de la requête.
              new_token:
                type: string
                description: Nouveau token à utiliser pour les prochains appels.
              resultats:
                type: array
                description: Résultat de la requete, peut être un tableau vide.
                items:
                  type: string
          examples:
            application/json:
              response: OK
              message: |
                La pièce a été supprimé avec succès.
              nb_resultats: 0
              execute_time: 0.00077
              resultats: null
        "400":
          description: |
            Les informations fournies ne sont pas bonne
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: |
                Les données transmises sont invalides.
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null

        "401":
          description: |
            Vous n'êtes pas authentifié.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: |
                Vous n'êtes pas authentifié
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null

        "403":
          description: |
            Vous n'avez pas de droit de supprimer cette pièce.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: |
                Vous n'avez pas le droit de supprimer cette pièce.
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null
        "404":
          description: |
            Aucun pièce trouvée.
          schema:
            $ref: "#/definitions/Returner"
          examples:
            application/json:
              response: FAIL
              message: |
                La pièce n'existe pas.
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null

  /cabinets/{id}/dossiers:
    get:
      summary: Liste des dossiers d'un cabinet
      description: |
        Liste des dossiers d'un cabinet depuis un critère
      tags:
        - Dossier
        - Cabinet
      parameters:
        - name: id
          description: |
            Identifiant du cabinet
          in: path
          type: integer
          format: int32
          required: true
        - $ref: '#/parameters/token'
        - $ref: '#/parameters/login'
        - $ref: '#/parameters/dsp'
      responses:
        "200":
          description: |
            Liste de dossier
          schema:
            $ref: '#/definitions/ListeDesDossiers'
          examples:
            application/json:
              response: OK
              message: ""
              nb_resultats: 4
              execute_time: 0.00087
              resultats:
                - dossier_id: 1
                  nom_prenom: Dupont Luc
                  vehicule:
                    immatriculation: DJ-925-AL
                  statut: 2
                - dossier_id: 2
                  nom_prenom: Marc Trollou
                  vehicule:
                    immatriculation: AP-832-DD
                  statut: 1
                - dossier_id: 3
                  nom_prenom: Julien Odre
                  vehicule:
                    immatriculation: JO-278-PP
                  statut: 1
                - dossier_id: 4
                  nom_prenom: Yannick Drouzé
                  vehicule:
                    immatriculation: YD-132-DD
                  statut: 2
              current_page: 0
              limit: 15

        "400":
          description: |
            L'identifiant transmis n'est pas valide.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: |
                L'identifiant transmis n'est pas valide.
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null

        "401":
          description: |
            Vous n'êtes pas authentifié.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: |
                Vous n'êtes pas authentifié.
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null

        "403":
          description: |
            Vous n'avez pas de droit d'accéder à ces dossiers.
          schema:
            $ref: '#/definitions/Returner'
          examples:
            application/json:
              response: FAIL
              message: |
                Vous n'avez pas le droit de supprimer cette pièce.
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null
        "404":
          description: |
            Aucun dossier trouvé.
          schema:
            $ref: "#/definitions/Returner"
          examples:
            application/json:
              response: FAIL
              message: |
                Aucun dossier trouvé.
              nb_resultats: 0
              execute_time: 0.00087
              resultats: null

# Liste des paramètres fréquents
parameters:

  token:
    name: token
    in: query
    description: |
      Token destiné à l'authentification
    required: true
    type: string

  login:
    name: login
    in: query
    description: |
      Login de l'utilisateur qui lance la requête
    required: true
    type: string

  dsp:
    name: dsp
    in: query
    description: |
      Booléen pour indiquer si l'on vient ou non de l'application DSP
    required: true
    type: boolean

# Liste des définitions des modèles
definitions:

  ListeDesDossiers:
    type: array
    items:
      title: Dossier
      required:
        - dossier_id
        - nom_prenom
        - vehicule
        - statut
      properties:
        dossier_id:
          type: integer
          description: Identifiant du dossier
        nom_prenom:
          type: string
          description: Nom et prénom de l'assuré
        vehicule:
          $ref: '#/definitions/VehiculeImmat'
        statut:
          type: integer
          description: Statut du dossier, permet de choisir l'icone correspondant au statut

  Dossier:
    type: object
    required:
      - dossier_id
      - nom_prenom
      - vehicule
      - photos
      - nombre_photos
      - statut
      - afficher_btn_expertiser
      - afficher_btn_proces_verbal
    properties:
      dossier_id:
        type: integer
        description: Identifiant du dossier
      nom_prenom:
        type: string
        description: Nom et prénom de l'assuré
      vehicule:
        $ref: "#/definitions/Vehicule"
      photos:
        type: array
        items:
          $ref: "#/definitions/Photo"
      nombre_photos:
        type: integer
        description: Nombre de photo du dossier pour la grêle
      date_rapport:
        type: string
        description: Date du rapport
      montant:
        type: number
        description: Montant des réparations défini
      statut:
        type: integer
        description: Statut du dossier, permet de choisir l'icone correspondant au statut
      afficher_btn_expertiser:
        type: boolean
        description: |
          Défini si le bouton "Expertiser le véhicule" est affichable.
      afficher_btn_proces_verbal:
        type: boolean
        description: |
          Défini si le bouton "Etablir le procès verbal" est affichable.

  Vehicule:
    type: object
    required:
      - immatriculation
      - marque
      - modele
      - nombre_pieces
    properties:
      immatriculation:
        type: string
        description: Immatriculation du véhicule
      marque:
        type: string
        description: Marque du véhicule à expertiser
      modele:
        type: string
        description: Modèle du véhicule à expertiser
      nombre_pieces:
        type:  integer
        description: Nombre de pièces endommagées sur ce véhicule

  VehiculeImmat:
    type: object
    required:
      - immatriculation
    properties:
      immatriculation:
        type: string
        description: Immatriculation du véhicule

  Piece:
    type: object
    required:
      - nom
      - impact
      - type_reparation
      - aluminium
      - peinture
      - hors_sinistre
    properties:
      nom:
        type: string
        description: Nom de la pièce endommagée
      aluminium:
        type: boolean
        description: La pièce est-elle en aluminium ?
      peinture:
        type: boolean
        description: La pièce doit-elle être peinte ?
      hors_sinistre:
        type: boolean
        description: La pièce a-t-elle été endommagé avant le sinistre ?
      type_reparation:
        type: string
        description: Libellé du type de réparation à faire.
      impact:
        type: array
        items:
          $ref: "#/definitions/Impact"
  Impact:
    type: object
    required:
      - taille
      - nombre
    properties:
      taille:
        type: string
        description: Taille de l'impact en toute lettre
        enum:
          - petit
          - moyen
          - gros
      nombre:
        type: integer
        description: Nombre d'impacts présent avec ce diamètre sur la pièce correspondante

  Photo:
    type: object
    required:
        - url
        - photo_id
    properties:
      url:
        type: string
        description: Url de la photo en vue de l'afficher
      photo_id:
        type: integer
        description: Identifiant de l'image

  Returner:
    type: object
    required:
      - message
      - response
      - resultats
      - nb_resultats
      - execute_time
    properties:
      message:
        type: string
        description: Message sur le statut de la requête.
      response:
        type: string
        description: Statut de la requete.
      nb_resultats:
        type: integer
        format: int32
        description: Nombre de résultats de la requête
      execute_time:
        type: number
        description: Temps de l'exécution de la requête
      new_token:
        type: string
        description: Nouveau token à utiliser pour les prochains appels
      resultats:
        type: array
        description: Résultat de la requete, peut être un tableau vide.
        items:
          type: string

  Grille:
    type: object
    required:
      - nom_grille
      - montant
    properties:
      nom_grille:
        type: string
        description: |
          Nom de la grille de DSP
      montant:
        type: number
        description: |
          Montant décimal du chiffrage selon la taille et le nombre d'impact pour cette grille


  ListePrixGrilles:
    type: array
    items:
      $ref: '#/definitions/Grille'